<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WatchMate Comprehensive UI Mockup</title>
    <style>
        body {
            font-family: 'Century Gothic', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fafafa;
            color: #262626;
        }
        .container {
            max-width: 600px;
            margin: 20px auto;
            background-color: #fff;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .header {
            background-color: #fff;
            color: #262626;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            border-bottom: 1px solid #dbdbdb;
        }
        .content {
            padding: 20px;
            max-height: 600px;
            overflow-y: auto;
        }
        .watch-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .watch-card {
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            color: #fff;
            cursor: pointer;
            transition: transform 0.2s;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .watch-card img {
            width: 100%;
            height: auto;
        }
        .watch-card-details {
            padding: 15px;
            background: rgba(0, 0, 0, 0.6);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .watch-card:hover {
            transform: scale(1.05);
        }
        .complication-list, .repair-list {
            list-style-type: none;
            padding: 0;
        }
        .complication-item, .repair-item, .forum-post {
            background-color: #f9f9f9;
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .button {
            background-color: #0095f6;
            color: #fff;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            display: block;
            width: 100%;
            margin-top: 15px;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .button:hover {
            background-color: #0084e0;
        }
        .tab-bar {
            display: flex;
            justify-content: space-around;
            background-color: #fff;
            padding: 15px 0;
            border-top: 1px solid #dbdbdb;
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 600px;
        }
        .tab {
            text-align: center;
            color: #262626;
            cursor: pointer;
            font-size: 12px;
        }
        .tab img {
            display: block;
            margin: 0 auto;
            width: 24px;
            height: 24px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #262626;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #dbdbdb;
            border-radius: 5px;
            background-color: #fff;
            color: #262626;
        }
        .watch-face {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: 10px solid #ffd700;
            position: relative;
            margin: 20px auto;
            background-color: #fff;
        }
        .complication {
            position: absolute;
            width: 40px;
            height: 40px;
            background-color: #0a192f;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffd700;
            font-weight: bold;
        }
        .bell-icon {
            position: absolute;
            top: -10px;
            right: -10px;
            cursor: pointer;
            background-color: #ffd700;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            z-index: 1000;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
        }
        .tag {
            display: inline-block;
            background-color: #0095f6;
            color: #fff;
            padding: 5px 10px;
            border-radius: 15px;
            margin-right: 5px;
            margin-bottom: 5px;
            font-size: 12px;
        }
        .search-bar {
            width: 100%;
            padding: 10px;
            border: 1px solid #dbdbdb;
            border-radius: 5px;
            background-color: #fff;
            color: #262626;
            margin-bottom: 20px;
        }
        .notification-center {
            background-color: #fff;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 20px;
            color: #262626;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .notification-item {
            padding: 10px;
            border-bottom: 1px solid #dbdbdb;
        }
        .notification-item:last-child {
            border-bottom: none;
        }
        .icon-button {
            background: none;
            border: none;
            cursor: pointer;
            color: #262626;
            font-size: 20px;
            padding: 5px;
        }
        .premium-feature {
            position: relative;
            overflow: hidden;
        }
        .premium-feature::after {
            content: "Premium";
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: gold;
            color: black;
            padding: 2px 5px;
            font-size: 0.8em;
            border-radius: 3px;
        }
        .affiliate-link {
            color: #0095f6;
            text-decoration: underline;
        }
        .direct-message {
            background-color: #e1f5fe;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 10px;
        }
        .watch-details {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .watch-image {
            width: 100%;
            max-width: 300px;
            height: auto;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .watch-info {
            width: 100%;
            text-align: left;
        }
        .watch-info h3 {
            margin-top: 0;
            margin-bottom: 10px;
        }
        .watch-info p {
            margin: 5px 0;
        }
        /* New styles for trend tables */
        .trend-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .trend-table th, .trend-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .trend-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        .trend-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            WatchMate
        </div>
        <div class="content" id="mainContent">
            <!-- Content will be dynamically inserted here -->
        </div>
        <div class="tab-bar">
            <div class="tab" onclick="showScreen('dashboard')">
                <img src="path/to/dashboard-icon.svg" alt="Dashboard" /><br>
                Dashboard
            </div>
            <div class="tab" onclick="showScreen('watches')">
                <img src="path/to/watch-icon.svg" alt="Watches" /><br>
                Watches
            </div>
            <div class="tab" onclick="showScreen('complications')">
                <img src="path/to/complications-icon.svg" alt="Complications" /><br>
                Complications
            </div>
            <div class="tab" onclick="showScreen('community')">
                <img src="path/to/community-icon.svg" alt="Community" /><br>
                Community
            </div>
            <div class="tab" onclick="showScreen('more')">
                <img src="path/to/more-icon.svg" alt="More" /><br>
                More
            </div>
        </div>
    </div>

    <script>
        const watches = [
            { id: 1, brand: 'Rolex', model: 'Submariner', accuracy: 2, marketValue: 12500, image: 'https://via.placeholder.com/300x300?text=Rolex+Submariner', purchasePrice: 10000, purchaseDate: '2022-01-15', privacy: 'public' },
            { id: 2, brand: 'Omega', model: 'Speedmaster', accuracy: -1, marketValue: 6200, image: 'https://via.placeholder.com/300x300?text=Omega+Speedmaster', purchasePrice: 5000, purchaseDate: '2021-06-30', privacy: 'private' },
            { id: 3, brand: 'Seiko', model: 'Presage', accuracy: 5, marketValue: 800, image: 'https://via.placeholder.com/300x300?text=Seiko+Presage', purchasePrice: 700, purchaseDate: '2023-03-10', privacy: 'public' },
            { id: 4, brand: 'Patek Philippe', model: 'Nautilus', accuracy: 1, marketValue: 70000, image: 'https://via.placeholder.com/300x300?text=Patek+Philippe+Nautilus', purchasePrice: 65000, purchaseDate: '2020-12-25', privacy: 'private' }
        ];

        const complications = [
            { id: 1, watchId: 1, type: 'Day/Date', lastAdjusted: '2023-06-30', nextAdjustment: '2023-07-31', reminderEnabled: true, reminderType: 'push', position: { top: '50%', left: '85%' } },
            { id: 2, watchId: 2, type: 'Chronograph', lastService: '2022-08-01', serviceInterval: 365, reminderEnabled: false, reminderType: 'email', position: { top: '25%', left: '50%' } },
            { id: 3, watchId: 3, type: 'Power Reserve', lastFullWind: '2023-07-01', powerReserveDuration: 48, reminderEnabled: true, reminderType: 'push', position: { top: '75%', left: '50%' } }
        ];

        const repairServices = [
            { id: 1, name: 'Swiss Watch Repair', location: 'New York', rating: 4.8, tags: ['Rolex', 'Omega', 'Vintage'] },
            { id: 2, name: 'Precision Timepieces', location: 'Los Angeles', rating: 4.5, tags: ['Patek Philippe', 'Audemars Piguet', 'High-End'] },
            { id: 3, name: 'Watchmaker\'s Workshop', location: 'Chicago', rating: 4.7, tags: ['Seiko', 'Vintage', 'Restoration'] }
        ];

        const forumPosts = [
            { id: 1, title: 'New Rolex Release', author: 'WatchFan1', content: 'What do you think about the new Rolex release?' },
            { id: 2, title: 'Vintage Watch Care', author: 'OldSchoolCollector', content: 'Tips for maintaining vintage watches?' },
            { id: 3, title: 'Accuracy Comparison', author: 'PrecisionLover', content: 'Let\'s compare the accuracy of different movements!' }
        ];

        const notifications = [
            { id: 1, message: 'Your Rolex Submariner needs adjustment tomorrow.', type: 'reminder', read: false },
            { id: 2, message: 'New post in community forum: Vintage Watch Care', type: 'forum', read: false },
            { id: 3, message: 'Precision Timepieces received a new review.', type: 'repair', read: true }
        ];

        const marketData = [
            { watchId: 1, date: '2023-07-01', value: 12500 },
            { watchId: 1, date: '2023-06-01', value: 12300 },
            { watchId: 1, date: '2023-05-01', value: 12100 },
            { watchId: 2, date: '2023-07-01', value: 6200 },
            { watchId: 2, date: '2023-06-01', value: 6100 },
            { watchId: 2, date: '2023-05-01', value: 6000 },
            { watchId: 3, date: '2023-07-01', value: 800 },
            { watchId: 3, date: '2023-06-01', value: 790 },
            { watchId: 3, date: '2023-05-01', value: 780 },
            { watchId: 4, date: '2023-07-01', value: 70000 },
            { watchId: 4, date: '2023-06-01', value: 69000 },
            { watchId: 4, date: '2023-05-01', value: 68000 },
        ];

        const accuracyData = [
            { watchId: 1, date: '2023-07-01', accuracy: 2 },
            { watchId: 1, date: '2023-06-01', accuracy: 1.5 },
            { watchId: 1, date: '2023-05-01', accuracy: 2.5 },
            { watchId: 2, date: '2023-07-01', accuracy: -1 },
            { watchId: 2, date: '2023-06-01', accuracy: -1.2 },
            { watchId: 2, date: '2023-05-01', accuracy: -0.8 },
            { watchId: 3, date: '2023-07-01', accuracy: 5 },
            { watchId: 3, date: '2023-06-01', accuracy: 4.5 },
            { watchId: 3, date: '2023-05-01', accuracy: 5.5 },
            { watchId: 4, date: '2023-07-01', accuracy: 1 },
            { watchId: 4, date: '2023-06-01', accuracy: 0.8 },
            { watchId: 4, date: '2023-05-01', accuracy: 1.2 },
        ];

        const customizationHistory = [
            { watchId: 1, date: '2023-05-15', description: 'Changed strap to leather' },
            { watchId: 1, date: '2023-03-20', description: 'Polished case' },
            { watchId: 2, date: '2023-06-10', description: 'Replaced crystal' },
        ];

        function showScreen(screen) {
            const content = document.getElementById('mainContent');
            content.innerHTML = `
                <input class="search-bar" type="text" placeholder="Search..." oninput="search(event, '${screen}')" />
            `;
            switch(screen) {
                case 'dashboard':
                    showDashboard();
                    break;
                case 'watches':
                    content.innerHTML += `
                        <h2>My Watch Collection</h2>
                        <div class="watch-grid">
                            ${watches.map(watch => `
                                <div class="watch-card" onclick="showWatchDetails(${watch.id})">
                                    <img src="${watch.image}" alt="${watch.brand} ${watch.model}">
                                    <div class="watch-card-details">
                                        <h3>${watch.brand}</h3>
                                        <p>${watch.model}</p>
                                        <p>Market Value: $${watch.marketValue}</p>
                                        <p>Privacy: ${watch.privacy}</p>
                                        <div>
                                            <button class="icon-button" onclick="showShareWatch(${watch.id}); event.stopPropagation();"><img src="path/to/share-icon.svg" alt="Share"></button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        <button class="button" onclick="showAddWatch()">Add New Watch</button>
                        <button class="button premium-feature" onclick="showWatchMatcher()">Watch Matcher</button>
                    `;
                    break;
                case 'complications':
                    content.innerHTML += `
                        <h2>Complication Management</h2>
                        <ul class="complication-list">
                            ${complications.map(complication => `
                                <li class="complication-item" onclick="showComplicationDetails(${complication.id})">
                                    <h3>${watches.find(w => w.id === complication.watchId).brand} - ${complication.type}</h3>
                                    <p>Next Adjustment: ${complication.nextAdjustment}</p>
                                </li>
                            `).join('')}
                        </ul>
                        <button class="button" onclick="showAddComplication()">Add New Complication</button>
                    `;
                    break;
                case 'community':
                    content.innerHTML += `
                        <h2>Community Forum</h2>
                        ${forumPosts.map(post => `
                            <div class="forum-post">
                                <h3>${post.title}</h3>
                                <p>By: ${post.author}</p>
                                <p>${post.content}</p>
                                <div>
                                    <button class="icon-button"><img src="path/to/like-icon.svg" alt="Like"></button>
                                    <button class="icon-button" onclick="showComments(${post.id})"><img src="path/to/comment-icon.svg" alt="Comment"></button>
                                    <button class="icon-button"><img src="path/to/share-icon.svg" alt="Share"></button>
                                </div>
                            </div>
                        `).join('')}
                        <button class="button" onclick="showNewPost()">New Post</button>
                        <button class="button" onclick="showDirectMessages()">Direct Messages</button>
                    `;
                    break;
                case 'more':
                    content.innerHTML += `
                        <h2>More Options</h2>
                        <button class="button" onclick="showScreen('profile')">User Profile</button>
                        <button class="button" onclick="showScreen('settings')">Settings</button>
                        <button class="button" onclick="showScreen('help')">Help & Support</button>
                        <button class="button" onclick="showScreen('about')">About WatchMate</button>
                        <button class="button" onclick="showScreen('notifications')">Notifications</button>
                        <button class="button premium-feature" onclick="showUpgradeOptions()">Upgrade to Premium</button>
                    `;
                    break;
                case 'profile':
                    showUserProfile();
                    break;
                case 'notifications':
                    showNotifications();
                    break;
                case 'settings':
                    showSettings();
                    break;
                default:
                    content.innerHTML += `<p>Screen not found: ${screen}</p>`;
            }
        }

        function showWatchDetails(id) {
            const watch = watches.find(w => w.id === id);
            const watchComplications = complications.filter(c => c.watchId === id);
            const content = document.getElementById('mainContent');

            let complicationsHTML = watchComplications.map(complication => `
                <div class="complication" style="top: ${complication.position.top}; left: ${complication.position.left};">
                    ${complication.type.charAt(0)}
                    <span class="bell-icon" onclick="toggleReminderModal(${complication.id}, event)">ðŸ””</span>
                </div>
            `).join('');

            content.innerHTML = `
                <div class="watch-details">
                    <img src="${watch.image}" alt="${watch.brand} ${watch.model}" class="watch-image">
                    <div class="watch-info">
                        <h2>${watch.brand} ${watch.model}</h2>
                        <p><strong>Accuracy:</strong> ${watch.accuracy} sec/day</p>
                        <p><strong>Market Value:</strong> $${watch.marketValue}</p>
                        <p><strong>Purchase Price:</strong> $${watch.purchasePrice}</p>
                        <p><strong>Purchase Date:</strong> ${watch.purchaseDate}</p>
                        <p><strong>Privacy:</strong> ${watch.privacy}</p>
                        <button class="button" onclick="toggleWatchPrivacy(${watch.id})">Toggle Privacy</button>
                    </div>
                    <div class="watch-face">
                        ${complicationsHTML}
                    </div>
                    <h3>Complications</h3>
                    ${watchComplications.map(complication => getComplicationDetailHTML(complication)).join('')}
                    <h3>Market Value Trend</h3>
                    <div class="accuracy-chart" id="marketValueChart-${watch.id}"></div>
                    <h3>Accuracy Trend</h3>
                    <div class="accuracy-chart" id="accuracyChart-${watch.id}"></div>
                    <button class="button" onclick="showCustomizationHistory(${watch.id})">Customization History</button>
                    <button class="button" onclick="showWatchServiceHistory(${watch.id})">Service History</button>
                    <a href="#" class="affiliate-link" onclick="handleAffiliateLinkClick(${watch.id})">Shop similar watches</a>
                    <button class="button" onclick="showScreen('watches')">Back to Collection</button>
                </div>
            `;

            renderMarketValueChart(watch.id);
            renderAccuracyChart(watch.id);
        }

        function renderMarketValueChart(watchId) {
            const chartData = marketData.filter(data => data.watchId === watchId);
            const chartElement = document.getElementById(`marketValueChart-${watchId}`);
            
            let tableHTML = `
                <table class="trend-table">
                    <tr>
                        <th>Date</th>
                        <th>Market Value</th>
                    </tr>
                    ${chartData.map(data => `
                        <tr>
                            <td>${data.date}</td>
                            <td>$${data.value}</td>
                        </tr>
                    `).join('')}
                </table>
            `;
            
            chartElement.innerHTML = tableHTML;
        }

        function renderAccuracyChart(watchId) {
            const chartData = accuracyData.filter(data => data.watchId === watchId);
            const chartElement = document.getElementById(`accuracyChart-${watchId}`);
            
            let tableHTML = `
                <table class="trend-table">
                    <tr>
                        <th>Date</th>
                        <th>Accuracy (sec/day)</th>
                    </tr>
                    ${chartData.map(data => `
                        <tr>
                            <td>${data.date}</td>
                            <td>${data.accuracy}</td>
                        </tr>
                    `).join('')}
                </table>
            `;
            
            chartElement.innerHTML = tableHTML;
        }

        function getComplicationDetailHTML(complication) {
            switch(complication.type) {
                case 'Day/Date':
                    return `
                        <div class="complication-detail">
                            <h4>${complication.type}</h4>
                            <p>Last Adjusted: ${complication.lastAdjusted}</p>
                            <p>Next Adjustment: ${complication.nextAdjustment}</p>
                            <button class="button" onclick="adjustDayDate(${complication.id})">Adjust Now</button>
                        </div>
                    `;
                case 'Chronograph':
                    return `
                        <div class="complication-detail">
                            <h4>${complication.type}</h4>
                            <p>Last Service: ${complication.lastService}</p>
                            <p>Service Interval: ${complication.serviceInterval} days</p>
                            <button class="button" onclick="serviceChronograph(${complication.id})">Mark as Serviced</button>
                        </div>
                    `;
                case 'Power Reserve':
                    return `
                        <div class="complication-detail">
                            <h4>${complication.type}</h4>
                            <p>Last Full Wind: ${complication.lastFullWind}</p>
                            <p>Power Reserve Duration: ${complication.powerReserveDuration} hours</p>
                            <button class="button" onclick="windWatch(${complication.id})">Mark as Fully Wound</button>
                        </div>
                    `;
                default:
                    return `<p>Details not available for this complication type.</p>`;
            }
        }

        function toggleReminderModal(complicationId, event) {
            event.stopPropagation();
            const complication = complications.find(c => c.id === complicationId);
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <h3>Set Reminder for ${complication.type}</h3>
                <label>
                    <input type="checkbox" ${complication.reminderEnabled ? 'checked' : ''} onchange="updateReminderSettings(${complicationId}, this.checked)">
                    Enable Reminder
                </label>
                <select onchange="updateReminderType(${complicationId}, this.value)" ${!complication.reminderEnabled ? 'disabled' : ''}>
                    <option value="push" ${complication.reminderType === 'push' ? 'selected' : ''}>Push Notification</option>
                    <option value="email" ${complication.reminderType === 'email' ? 'selected' : ''}>Email</option>
                </select>
                <button onclick="closeModal()">Close</button>
            `;
            document.body.appendChild(modal);

            const backdrop = document.createElement('div');
            backdrop.className = 'modal-backdrop';
            document.body.appendChild(backdrop);
        }

        function closeModal() {
            const modal = document.querySelector('.modal');
            const backdrop = document.querySelector('.modal-backdrop');
            if (modal) modal.remove();
            if (backdrop) backdrop.remove();
        }

        function updateReminderSettings(complicationId, enabled) {
            const complication = complications.find(c => c.id === complicationId);
            complication.reminderEnabled = enabled;
            document.querySelector('select').disabled = !enabled;
            // In a real app, you would send this update to the server
        }

        function updateReminderType(complicationId, type) {
            const complication = complications.find(c => c.id === complicationId);
            complication.reminderType = type;
            // In a real app, you would send this update to the server
        }

        function showDashboard() {
            const content = document.getElementById('mainContent');
            const totalValue = watches.reduce((sum, watch) => sum + watch.marketValue, 0);
            const averageAccuracy = watches.reduce((sum, watch) => sum + watch.accuracy, 0) / watches.length;

            content.innerHTML += `
                <h2>Dashboard</h2>
                <div class="dashboard-summary">
                    <p>Total Watches: ${watches.length}</p>
                    <p>Total Collection Value: $${totalValue}</p>
                    <p>Average Accuracy: ${averageAccuracy.toFixed(2)} sec/day</p>
                </div>
                <h3>Quick Actions</h3>
                <button class="button" onclick="showAddWatch()">Add New Watch</button>
                <button class="button" onclick="showScreen('complications')">Manage Complications</button>
                <button class="button" onclick="showScreen('community')">Join Community</button>
                <h3>Recent Activity</h3>
                <ul>
                    ${watches.slice(0, 3).map(watch => `<li>Added ${watch.brand} ${watch.model}</li>`).join('')}
                </ul>
            `;
        }

        function showUserProfile() {
            const content = document.getElementById('mainContent');
            content.innerHTML += `
                <h2>User Profile</h2>
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" value="WatchEnthusiast" />
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" value="user@example.com" />
                </div>
                <div class="form-group">
                    <label>Bio</label>
                    <textarea>Passionate about mechanical watches</textarea>
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" value="Christchurch, NZ" />
                </div>
                <div class="form-group">
                    <label>Profile Picture</label>
                    <input type="file" accept="image/*" />
                </div>
                <div class="form-group">
                    <label>Watch Preferences</label>
                    <textarea placeholder="Enter your watch preferences"></textarea>
                </div>
                <div class="form-group">
                    <label>Favorite Brands</label>
                    <input type="text" placeholder="Enter your favorite brands" />
                </div>
                <div class="form-group">
                    <label>Social Media Links</label>
                    <input type="text" placeholder="Enter your social media links" />
                </div>
                <button class="button">Update Profile</button>
                <div class="profile-stats">
                    <h3>Profile Statistics</h3>
                    <p>Total Watches: ${watches.length}</p>
                    <p>Average Accuracy: ${calculateAverageAccuracy()} sec/day</p>
                    <p>Highest Market Value Watch: $${findHighestMarketValue()}</p>
                </div>
            `;
        }

        function showNotifications() {
            const content = document.getElementById('mainContent');
            content.innerHTML += `
                <h2>Notifications</h2>
                <div class="notification-center">
                    ${notifications.map(notification => `
                        <div class="notification-item" style="background-color: ${notification.read ? '#f9f9f9' : '#fff'}">
                            <p>${notification.message}</p>
                            <button class="button" onclick="markNotificationAsRead(${notification.id})">Mark as Read</button>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function showSettings() {
            const content = document.getElementById('mainContent');
            content.innerHTML += `
                <h2>Settings</h2>
                <h3>Notifications</h3>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="pushNotifications" checked> 
                        Enable Push Notifications
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="emailNotifications" checked> 
                        Enable Email Notifications
                    </label>
                </div>
                <h3>Privacy</h3>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="publicProfile" checked> 
                        Public Profile
                    </label>
                </div>
                <div class="form-group">
                    <label>Default Watch Privacy</label>
                    <select id="defaultWatchPrivacy">
                        <option>Public</option>
                        <option>Private</option>
                    </select>
                </div>
                <h3>Appearance</h3>
                <div class="form-group">
                    <label>Theme</label>
                    <select id="appTheme">
                        <option>Light</option>
                        <option>Dark</option>
                        <option>System Default</option>
                    </select>
                </div>
                <button class="button" onclick="saveSettings()">Save Settings</button>
            `;
        }

        function showWatchServiceHistory(watchId) {
            const watch = watches.find(w => w.id === watchId);
            const content = document.getElementById('mainContent');

            // Dummy service history data
            const serviceHistory = [
                { date: '2023-01-15', type: 'Full Service', provider: 'Swiss Watch Repair', cost: 500 },
                { date: '2022-06-30', type: 'Battery Replacement', provider: 'Local Jeweler', cost: 50 },
                { date: '2021-11-20', type: 'Water Resistance Test', provider: 'Precision Timepieces', cost: 100 },
            ];

            content.innerHTML = `
                <h2>${watch.brand} ${watch.model} - Service History</h2>
                <table>
                    <tr>
                        <th>Date</th>
                        <th>Service Type</th>
                        <th>Provider</th>
                        <th>Cost</th>
                    </tr>
                    ${serviceHistory.map(service => `
                        <tr>
                            <td>${service.date}</td>
                            <td>${service.type}</td>
                            <td>${service.provider}</td>
                            <td>$${service.cost}</td>
                        </tr>
                    `).join('')}
                </table>
                <button class="button" onclick="showAddServiceRecord(${watchId})">Add Service Record</button>
                <button class="button" onclick="showWatchDetails(${watchId})">Back to Watch Details</button>
            `;
        }

        function showCustomizationHistory(watchId) {
            const history = customizationHistory.filter(h => h.watchId === watchId);
            const content = document.getElementById('mainContent');
            content.innerHTML = `
                <h2>Customization History</h2>
                ${history.map(h => `
                    <div class="customization-item">
                        <p>Date: ${h.date}</p>
                        <p>Description: ${h.description}</p>
                    </div>
                `).join('')}
                <button class="button" onclick="showAddCustomization(${watchId})">Add Customization</button>
                <button class="button" onclick="showWatchDetails(${watchId})">Back to Watch Details</button>
            `;
        }

        function showWatchMatcher() {
            const content = document.getElementById('mainContent');
            content.innerHTML = `
                <h2>Watch Matcher</h2>
                <p>Answer these questions to get personalized watch recommendations.</p>
                <div class="form-group">
                    <label>What's your budget?</label>
                    <input type="range" min="100" max="10000" value="5000" id="budget">
                    <output for="budget" id="budgetOutput">$5000</output>
                </div>
                <div class="form-group">
                    <label>Preferred Style</label>
                    <select id="style">
                        <option>Dress</option>
                        <option>Dive</option>
                        <option>Pilot</option>
                        <option>Chronograph</option>
                        <option>Minimalist</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Preferred Movement</label>
                    <select id="movement">
                        <option>Automatic</option>
                        <option>Manual</option>
                        <option>Quartz</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Preferred Case Material</label>
                    <select id="material">
                        <option>Stainless Steel</option>
                        <option>Gold</option>
                        <option>Titanium</option>
                        <option>Ceramic</option>
                    </select>
                </div>
                <button class="button" onclick="getWatchRecommendations()">Get Recommendations</button>
                <button class="button" onclick="showScreen('watches')">Back</button>
            `;

            // Add event listener for budget range input
            document.getElementById('budget').addEventListener('input', function() {
                document.getElementById('budgetOutput').textContent = '$' + this.value;
            });
        }

        function getWatchRecommendations() {
            // This function would typically make an API call to get recommendations
            // For this mockup, we'll just show a dummy recommendation
            const content = document.getElementById('mainContent');
            content.innerHTML += `
                <h3>Recommendations</h3>
                <div class="watch-card">
                    <img src="https://via.placeholder.com/150?text=Recommended+Watch" alt="Recommended Watch">
                    <div class="watch-card-details">
                        <h3>Recommended Watch</h3>
                        <p>Based on your preferences</p>
                        <p>Price: $${document.getElementById('budget').value}</p>
                    </div>
                </div>
            `;
        }

        function showAddWatch() {
            const content = document.getElementById('mainContent');
            content.innerHTML = `
                <h2>Add New Watch</h2>
                <form id="addWatchForm">
                    <div class="form-group">
                        <label>Brand</label>
                        <input type="text" id="watchBrand" required />
                    </div>
                    <div class="form-group">
                        <label>Model</label>
                        <input type="text" id="watchModel" required />
                    </div>
                    <div class="form-group">
                        <label>Purchase Price</label>
                        <input type="number" id="watchPrice" required />
                    </div>
                    <div class="form-group">
                        <label>Purchase Date</label>
                        <input type="date" id="watchPurchaseDate" required />
                    </div>
                    <div class="form-group">
                        <label>Privacy</label>
                        <select id="watchPrivacy">
                            <option value="public">Public</option>
                            <option value="private">Private</option>
                        </select>
                    </div>
                    <button class="button" type="button" onclick="submitNewWatch()">Add Watch</button>
                    <button class="button" onclick="showScreen('watches')">Cancel</button>
                </form>
            `;
        }

        function submitNewWatch() {
            const brand = document.getElementById('watchBrand').value;
            const model = document.getElementById('watchModel').value;
            const price = document.getElementById('watchPrice').value;
            const purchaseDate = document.getElementById('watchPurchaseDate').value;
            const privacy = document.getElementById('watchPrivacy').value;

            const newWatch = {
                id: watches.length + 1,
                brand,
                model,
                accuracy: 0, // Initial accuracy
                marketValue: parseInt(price), // Initial market value same as purchase price
                image: `https://via.placeholder.com/150?text=${brand}+${model}`,
                purchasePrice: parseInt(price),
                purchaseDate,
                privacy
            };

            watches.push(newWatch);
            showScreen('watches');
        }

        function calculateAverageAccuracy() {
            const sum = watches.reduce((acc, watch) => acc + watch.accuracy, 0);
            return (sum / watches.length).toFixed(2);
        }

        function findHighestMarketValue() {
            return Math.max(...watches.map(watch => watch.marketValue));
        }

        function adjustDayDate(complicationId) {
            const complication = complications.find(c => c.id === complicationId);
            complication.lastAdjusted = new Date().toISOString().split('T')[0];
            complication.nextAdjustment = calculateNextAdjustment(complication.lastAdjusted);
            showWatchDetails(complication.watchId);
        }

        function calculateNextAdjustment(date) {
            const nextDate = new Date(date);
            nextDate.setMonth(nextDate.getMonth() + 1);
            if (nextDate.getDate() < 28) {
                nextDate.setDate(28);
            }
            return nextDate.toISOString().split('T')[0];
        }

        function serviceChronograph(complicationId) {
            const complication = complications.find(c => c.id === complicationId);
            complication.lastService = new Date().toISOString().split('T')[0];
            showWatchDetails(complication.watchId);
        }

        function windWatch(complicationId) {
            const complication = complications.find(c => c.id === complicationId);
            complication.lastFullWind = new Date().toISOString();
            showWatchDetails(complication.watchId);
        }

        function toggleWatchPrivacy(watchId) {
            const watch = watches.find(w => w.id === watchId);
            watch.privacy = watch.privacy === 'public' ? 'private' : 'public';
            showWatchDetails(watchId);
        }

        function handleAffiliateLinkClick(watchId) {
            console.log(`Affiliate link clicked for watch ${watchId}`);
            // In a real app, this would redirect to an affiliate link
        }

        function markNotificationAsRead(notificationId) {
            const notification = notifications.find(n => n.id === notificationId);
            notification.read = true;
            showNotifications();
        }

        function saveSettings() {
            // In a real app, this would save the settings to the server
            alert('Settings saved successfully!');
            showScreen('more');
        }

        // Initialize the app by showing the dashboard
        showScreen('dashboard');
    </script>
</body>
</html>